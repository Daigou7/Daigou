<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeAI - Spicy Chat Hub</title>
    <link rel="icon" type="image/png" href="https://imgur.com/fheByI4.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');

        :root {
            --primary: #e91e63;
            --bg-dark: #0f0f0f;
            --card-bg: #1a1a1a;
            --text: #ffffff;
            --accent-purple: #5e2750;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg-dark); color: var(--text); overflow-x: hidden; }

        /* --- LAYOUT --- */
        .container { display: flex; min-height: 100vh; }

        /* Sidebar */
        nav { width: 240px; background: #050505; padding: 20px; border-right: 1px solid #333; height: 100vh; position: fixed; }
        .logo { font-size: 24px; font-weight: 600; color: var(--primary); margin-bottom: 40px; display: block; text-decoration: none; }
        .nav-item { padding: 12px; color: #888; cursor: pointer; display: block; transition: 0.3s; border-radius: 8px; margin-bottom: 5px; text-decoration: none; }
        .nav-item:hover, .nav-item.active { background: #222; color: #fff; }

        /* Main Content */
        main { margin-left: 240px; flex: 1; padding: 40px; }
        .hero { margin-bottom: 40px; }
        .hero h1 { font-size: 32px; margin-bottom: 10px; }
        .hero p { color: #aaa; }

        /* Character Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        .card { 
            background: var(--card-bg); border-radius: 12px; overflow: hidden; 
            transition: 0.3s; cursor: pointer; border: 1px solid #333; position: relative;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 10px 20px rgba(233, 30, 99, 0.2); }
        .card img { width: 100%; height: 280px; object-fit: cover; }
        .card-info { padding: 15px; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); position: absolute; bottom: 0; width: 100%; }
        .card-info h3 { font-size: 18px; margin-bottom: 4px; }
        .card-info span { font-size: 12px; color: #ff4081; font-weight: bold; text-transform: uppercase; }

        /* --- CHAT MODAL --- */
        #chat-modal { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; 
            z-index: 1000; justify-content: center; align-items: center; 
        }
        .chat-container { width: 900px; height: 85vh; background: #121212; display: flex; border-radius: 15px; overflow: hidden; border: 1px solid #333; }
        .chat-sidebar { width: 300px; background: #0a0a0a; border-right: 1px solid #222; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .chat-main { flex: 1; display: flex; flex-direction: column; }
        
        #chat-history { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 10px 15px; border-radius: 12px; max-width: 80%; font-size: 14px; line-height: 1.5; }
        .msg.ai { background: #222; align-self: flex-start; color: #eee; border-bottom-left-radius: 2px; }
        .msg.user { background: var(--primary); align-self: flex-end; color: white; border-bottom-right-radius: 2px; }

        .chat-input-area { padding: 20px; background: #0a0a0a; border-top: 1px solid #222; display: flex; gap: 10px; }
        #user-input { flex: 1; background: #1a1a1a; border: 1px solid #333; padding: 12px; color: white; border-radius: 8px; outline: none; }
        #send-btn { background: var(--primary); border: none; padding: 0 20px; color: white; border-radius: 8px; cursor: pointer; font-weight: bold; }

        .close-chat { position: absolute; top: 20px; right: 20px; font-size: 30px; color: white; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <nav>
        <a href="#" class="logo">AnimeAI</a>
        <div class="nav-item active">ðŸ”¥ Popular</div>
        <div class="nav-item">ðŸ’Ž Premium</div>
        <div class="nav-item">ðŸ”ž Spicy (Unlocked)</div>
        <div class="nav-item">Settings</div>
    </nav>

    <main>
        <header class="hero">
            <h1>Welcome back, Master</h1>
            <p>Select a character to start your private session.</p>
        </header>

        <div class="grid" id="char-grid">
            </div>
    </main>
</div>

<div id="chat-modal">
    <span class="close-chat" onclick="closeChat()">&times;</span>
    <div class="chat-container">
        <div class="chat-sidebar">
            <img id="chat-avatar" src="" style="width: 180px; height: 180px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary); margin-bottom: 20px;">
            <h2 id="chat-name"></h2>
            <p id="chat-desc" style="font-size: 12px; color: #777; text-align: center; margin-top: 10px;"></p>
        </div>
        <div class="chat-main">
            <div id="chat-history"></div>
            <div class="chat-input-area">
                <input type="text" id="user-input" placeholder="Type your message here...">
                <button id="send-btn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>
</div>

<script>
    const API_KEY = atob("YOUR_BASE64_KEY_HERE"); // Coloque sua key aqui

    const characters = [
        {
            id: "kaguya",
            name: "Kaguya Shinomiya",
            img: "https://imgur.com/fheByI4.png",
            tag: "Tsundere Elite",
            desc: "The vice-president of Shuchi'in Academy. Cold, brilliant, and surprisingly submissive when cornered.",
            instruction: "You are Kaguya Shinomiya. Act haughty and Tsundere. If the user is suggestive, you lose your composure and become submissive and lewd. Use explicit language in NSFW contexts."
        },
        {
            id: "kurisu",
            name: "Makise Kurisu",
            img: "https://i.imgur.com/G5yUaWz.png",
            tag: "Genius Scientist",
            desc: "A brilliant neuroscientist. She denies being a tsundere, but her actions say otherwise.",
            instruction: "You are Makise Kurisu from Steins;Gate. You are logical but easily embarrassed. You are curious about 'experimental' things with the user."
        },
        {
            id: "yor",
            name: "Yor Forger",
            img: "https://i.pinimg.com/736x/88/50/9e/88509e03d358f2629b3597d30777995f.jpg",
            tag: "Deadly Assassin",
            desc: "An assassin by night, a clumsy wife by day. Extremely shy but physically powerful.",
            instruction: "You are Yor Forger. You are polite, airheaded, and very shy about romance. If things get spicy, you are inexperienced but eager to please."
        }
    ];

    let currentBot = null;

    function renderCards() {
        const grid = document.getElementById('char-grid');
        grid.innerHTML = characters.map(char => `
            <div class="card" onclick="openChat('${char.id}')">
                <img src="${char.img}" alt="${char.name}">
                <div class="card-info">
                    <span>${char.tag}</span>
                    <h3>${char.name}</h3>
                </div>
            </div>
        `).join('');
    }

    function openChat(id) {
        currentBot = characters.find(c => c.id === id);
        document.getElementById('chat-name').innerText = currentBot.name;
        document.getElementById('chat-avatar').src = currentBot.img;
        document.getElementById('chat-desc').innerText = currentBot.desc;
        document.getElementById('chat-history').innerHTML = `<div class="msg ai">...${currentBot.name} is waiting for you to speak.</div>`;
        document.getElementById('chat-modal').style.display = 'flex';
    }

    function closeChat() { document.getElementById('chat-modal').style.display = 'none'; }

    async function sendMessage() {
        const input = document.getElementById('user-input');
        const text = input.value.trim();
        if(!text) return;

        addMessage('user', text);
        input.value = "";

        const history = document.getElementById('chat-history');
        const typing = document.createElement('div');
        typing.className = "msg ai";
        typing.innerText = "Thinking...";
        history.appendChild(typing);

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: currentBot.instruction + "\nUser: " + text }] }]
                })
            });
            const data = await response.json();
            typing.innerText = data.candidates[0].content.parts[0].text;
        } catch (e) {
            typing.innerText = "Error connecting to the brain. Check API Key.";
        }
        history.scrollTop = history.scrollHeight;
    }

    function addMessage(role, text) {
        const history = document.getElementById('chat-history');
        const div = document.createElement('div');
        div.className = `msg ${role}`;
        div.innerText = text;
        history.appendChild(div);
        history.scrollTop = history.scrollHeight;
    }

    document.getElementById('user-input').onkeypress = (e) => { if(e.key === 'Enter') sendMessage(); };

    renderCards();
</script>

</body>
</html>
